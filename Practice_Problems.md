# **Rails to SQL Worksheet**

For each statement, write down the SQL statement that will be generated by the method and used to query the database. Use a subquery when Rails would and a `JOIN` when Rails does. If a value is unknown and determined by the results of a prior query, use the variable `X` for that value.

---

## **0. Find the last child who was added and list their completed chores**
```ruby
Child.last.chores.done
```
**SQL Answer:**
```sql
SELECT *
  FROM children
 ORDER BY id DESC
 LIMIT ? [["LIMIT", 1]]

SELECT *
  FROM chores
 WHERE child_id = ? and completed = ? [["child_id", x], ["completed", 1]]
```

---

## **1. Find all upcoming chores assigned to a child with ID = 1**  
```ruby
Chore.upcoming.where(child_id: 1)
```
**SQL Answer:**  
```sql
SELECT *
  FROM chores
 WHERE (due_on >= '2025-02-11') AND (child_id = ?) [["child_id", 1]]
```

---

## **2. Get all active tasks in alphabetical order**  
```ruby
Task.active.alphabetical
```
**SQL Answer:**  
```sql
SELECT *
  FROM tasks
 WHERE active = ?
 ORDER BY last_name, first_name [["active", 1]]
```

---

## **3. Find all past chores for a child named 'Alice'**  
```ruby
Chore.past.joins(:child).where(children: { first_name: 'Alice' })
```
**SQL Answer:**  
```sql

```

---

## **4. Retrieve the first childâ€™s tasks**  
```ruby
Child.first.tasks
```
**SQL Answer:**  
```sql

```

---

## **5. Get all chores that belong to the most recently added child**  
```ruby
Child.last.chores
```
**SQL Answer:**  
```sql

```

---

## **6. Get all completed chores for tasks that are still active**  
```ruby
Chore.done.joins(:task).merge(Task.active)
```
**SQL Answer:**  
```sql

```

---

## **7. Find all tasks that have at least one incomplete chore**  
```ruby
Task.joins(:chores).merge(Chore.pending).distinct
```
**SQL Answer:**  
```sql

```

---

## **8. Get the names of children who have no assigned chores**  
```ruby
Child.left_joins(:chores).where(chores: { id: nil }).pluck(:first_name, :last_name)
```
**SQL Answer:**  
```sql

```

---

## **9. Find the first pending chore ordered by due date**  
```ruby
Chore.pending.order(:due_on).first
```
**SQL Answer:**  
```sql

```

---

## **10. Get all children who have completed all their assigned chores**  
```ruby
Child.joins(:chores).group(:id).having("SUM(CASE WHEN chores.completed = false THEN 1 ELSE 0 END) = 0")
```
**SQL Answer:**  
```sql

```

---
